# 27학년도 데이터 입력 가이드

## 입력 화면 구조

### 1단계: 기본 정보
```
┌─────────────────────────────────────────────────────────┐
│ 🏫 학과 기본 정보                                        │
├─────────────────────────────────────────────────────────┤
│ 학년도:     [2027 ▼]                                    │
│ 대학명:     [서울대학교        ]   🔍 검색              │
│ 학과명:     [체육교육과        ]                        │
│ 모집군:     ○ 가군  ● 나군  ○ 다군                     │
│                                                         │
│ [26학년도 데이터 복사] ← 기존 데이터 있으면 활성화       │
└─────────────────────────────────────────────────────────┘
```

### 2단계: 계산 방식 선택
```
┌─────────────────────────────────────────────────────────┐
│ 📊 계산 방식 선택                                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ ● 기본 비율 계산                                        │
│   각 과목별 비율을 적용하여 계산 (가장 일반적)          │
│                                                         │
│ ○ 상위 N개 선택                                         │
│   여러 과목 중 상위 N개를 선택하여 계산                 │
│                                                         │
│ ○ 가중치 차등                                           │
│   상위 과목순으로 50/30/20% 등 차등 적용                │
│                                                         │
│ ○ 국/수 택1                                             │
│   국어와 수학 중 높은 점수 선택                         │
│                                                         │
│ ○ 특수 계산                                             │
│   위에 해당하지 않는 특수한 계산 방식                   │
│                                                         │
│ ℹ️ 요강에서 "상위 3개 영역" 등의 문구가 있으면          │
│   '상위 N개 선택'을 선택하세요.                         │
└─────────────────────────────────────────────────────────┘
```

### 3단계: 세부 설정 (기본 비율 선택 시)
```
┌─────────────────────────────────────────────────────────┐
│ ⚙️ 반영 비율 설정                                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ 총점:          [1000] 점                                │
│ 수능 반영비율:  [60] %                                  │
│                                                         │
│ ─── 과목별 반영비율 (합계 100%) ──────────────────────  │
│                                                         │
│ │ 과목  │ 비율(%) │ 점수유형     │ 탐구수 │            │
│ │───────│─────────│──────────────│────────│            │
│ │ 국어  │  [30]   │ [백분위 ▼]   │        │            │
│ │ 수학  │  [30]   │ [백분위 ▼]   │        │            │
│ │ 영어  │  [20]   │ [등급환산 ▼] │        │            │
│ │ 탐구  │  [20]   │ [백분위 ▼]   │  [2]   │            │
│                                                         │
│ 합계:         100% ✅                                   │
│                                                         │
│ ⚠️ 비율 합계가 100%가 아니면 저장할 수 없습니다.        │
└─────────────────────────────────────────────────────────┘
```

### 3단계: 세부 설정 (상위 N개 선택 시)
```
┌─────────────────────────────────────────────────────────┐
│ ⚙️ 상위 N개 선택 설정                                    │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ 선택 대상 과목:  ☑ 국어  ☑ 수학  ☑ 영어  ☑ 탐구       │
│                                                         │
│ 상위 몇 개 선택? [3] 개                                 │
│                                                         │
│ 계산 방식:       ● 평균  ○ 합계                        │
│                                                         │
│ 결과에 곱할 계수: [8.5]                                 │
│ 기본 점수:        [150] 점                              │
│                                                         │
│ ─── 계산식 미리보기 ─────────────────────────────────   │
│ (상위 3개 평균) × 8.5 + 150                             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 3단계: 세부 설정 (가중치 차등 시)
```
┌─────────────────────────────────────────────────────────┐
│ ⚙️ 가중치 차등 설정                                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ 선택 대상 과목:  ☑ 국어  ☑ 수학  ☑ 영어  ☑ 탐구       │
│                                                         │
│ 순위별 가중치:                                          │
│   1위: [50] %                                           │
│   2위: [30] %                                           │
│   3위: [20] %                                           │
│   합계: 100% ✅                                         │
│                                                         │
│ ─── 계산식 미리보기 ─────────────────────────────────   │
│ (1위 과목) × 50% + (2위 과목) × 30% + (3위 과목) × 20%  │
│                                                         │
│ ℹ️ 점수가 높은 과목 순으로 가중치가 적용됩니다.         │
└─────────────────────────────────────────────────────────┘
```

### 4단계: 영어/한국사 등급표
```
┌─────────────────────────────────────────────────────────┐
│ 📋 등급 환산표                                           │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ ─── 영어 등급 환산표 ────────────────────────────────   │
│ │ 등급 │  1  │  2  │  3  │  4  │  5  │  6  │  7-9 │    │
│ │──────│─────│─────│─────│─────│─────│─────│──────│    │
│ │ 점수 │[100]│[95] │[90] │[85] │[80] │[70] │[60]  │    │
│                                                         │
│ ☑ 기존 등급표 불러오기: [서울대학교 등급표 ▼]           │
│                                                         │
│ ─── 한국사 처리 ─────────────────────────────────────   │
│ 반영 방식: ● 가/감점  ○ 과목반영  ○ 미반영             │
│                                                         │
│ │ 등급 │ 1-3 │ 4-5 │  6  │  7  │  8  │  9  │           │
│ │──────│─────│─────│─────│─────│─────│─────│           │
│ │ 점수 │[10] │[10] │[9.8]│[9.6]│[9.4]│[9.2]│           │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 5단계: 미리보기 & 검증
```
┌─────────────────────────────────────────────────────────┐
│ ✅ 설정 확인 및 테스트                                   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ ─── 입력 요약 ───────────────────────────────────────   │
│ 대학/학과: 서울대학교 체육교육과 (나군)                 │
│ 총점: 1000점, 수능 반영: 60%                            │
│ 계산방식: 기본 비율                                     │
│ 국어 30% / 수학 30% / 영어 20% / 탐구 20%               │
│ 영어: 등급환산 (1등급 100점)                            │
│ 한국사: 가/감점 (1-3등급 10점)                          │
│                                                         │
│ ─── 테스트 계산 ─────────────────────────────────────   │
│                                                         │
│ 테스트 학생:   [만점형 ▼]   [직접 입력]                 │
│                                                         │
│ │ 과목  │ 입력값           │ 환산점수 │                 │
│ │───────│──────────────────│──────────│                 │
│ │ 국어  │ 백분위 99        │ 178.2    │                 │
│ │ 수학  │ 백분위 99        │ 178.2    │                 │
│ │ 영어  │ 1등급            │ 120.0    │                 │
│ │ 탐구  │ 백분위 98, 96    │ 116.4    │                 │
│ │ 한국사│ 1등급            │ 10.0     │                 │
│ │───────│──────────────────│──────────│                 │
│ │ 합계  │                  │ 602.8    │                 │
│                                                         │
│         [테스트 실행]    [설정 저장]                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 특수 케이스 입력

### 특수 계산 선택 시
```
┌─────────────────────────────────────────────────────────┐
│ ⚙️ 특수 계산 설정                                        │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ ⚠️ 특수 계산은 관리자 확인이 필요합니다.                │
│                                                         │
│ ─── 요강 원문 입력 ──────────────────────────────────   │
│ ┌─────────────────────────────────────────────────────┐ │
│ │ 국어 표준점수 × 1 + 수학 표준점수 × 1.2 +          │ │
│ │ (탐구1 + 탐구2) × 0.8 + 영어등급환산 + 한국사등급   │ │
│ └─────────────────────────────────────────────────────┘ │
│                                                         │
│ ─── 자동 변환 시도 ──────────────────────────────────   │
│                                                         │
│ 감지된 패턴: "가중 표준점수 합"                         │
│                                                         │
│ 변환된 수식:                                            │
│ {kor_std}*1 + {math_std}*1.2 + ({inq1_std}+{inq2_std})  │
│ *0.8 + {eng_grade_score} + {hist_grade_score}          │
│                                                         │
│ [변환 확인] [직접 수정]                                 │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## API 구조 (프론트엔드 연동용)

### 템플릿 목록 조회
```
GET /api/admin/templates
Response:
{
  "templates": [
    {
      "id": 1,
      "name": "basic_ratio",
      "displayName": "기본 비율 계산",
      "paramSchema": { ... }
    },
    ...
  ]
}
```

### 학과 설정 저장
```
POST /api/admin/departments/{deptId}/formula
Body:
{
  "templateId": 1,
  "params": {
    "국어": 30,
    "수학": 30,
    "영어": 20,
    "탐구": 20,
    "탐구수": 2,
    "점수유형": "백분위"
  },
  "englishGrades": { "1": 100, "2": 95, ... },
  "historyMode": "bonus",
  "historyGrades": { "1": 10, "2": 10, ... }
}
```

### 테스트 계산
```
POST /api/calculate/test
Body:
{
  "deptId": 123,
  "student": {
    "국어": { "percentile": 99 },
    "수학": { "percentile": 99 },
    "영어": { "grade": 1 },
    "탐구": [
      { "subject": "생명과학I", "percentile": 98 },
      { "subject": "지구과학I", "percentile": 96 }
    ],
    "한국사": { "grade": 1 }
  }
}
Response:
{
  "totalScore": 602.8,
  "breakdown": {
    "국어": 178.2,
    "수학": 178.2,
    "영어": 120.0,
    "탐구": 116.4,
    "한국사": 10.0
  },
  "logs": [ ... ]
}
```

---

## 26 → 27 데이터 복사 기능

```
┌─────────────────────────────────────────────────────────┐
│ 📋 26학년도 데이터 복사                                  │
├─────────────────────────────────────────────────────────┤
│                                                         │
│ 복사할 학과: [서울대학교 체육교육과 ▼]                  │
│                                                         │
│ 복사 항목:                                              │
│   ☑ 반영비율 (국어 30%, 수학 30%, ...)                 │
│   ☑ 영어 등급표                                        │
│   ☑ 한국사 등급표                                      │
│   ☑ 실기 배점표                                        │
│   ☐ 최저학력기준 (보통 변경됨)                         │
│                                                         │
│ ⚠️ 복사 후 변경사항을 확인하세요!                       │
│                                                         │
│         [복사 실행]    [취소]                           │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 검증 체크리스트

### 저장 전 자동 검증
- [ ] 과목 비율 합계 = 100%
- [ ] 총점 > 0
- [ ] 수능 반영비율 0-100%
- [ ] 영어 등급표 1-9등급 모두 입력
- [ ] 한국사 등급표 입력 (반영 시)
- [ ] 테스트 계산 결과 합리적 범위

### 저장 후 알림
```
✅ 저장 완료!

서울대학교 체육교육과 (2027학년도)
- 총점: 1000점
- 수능 60%, 실기 40%
- 계산방식: 기본비율

다음 단계:
[ ] 실기 배점 입력
[ ] 변환표준점수 테이블 입력 (해당 시)
[ ] 최저학력기준 입력
```
